{
  "$id": "https://quire.getty.com/figures.schema.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$ref": "#/definitions/Figures",
  "title": "Figures",
  "description": "Quire figures data schema",
  "type": "object",
  "definitions": {
    "Figures": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "figure_list": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Figure"
          },
          "uniqueItems": true
        }
      },
      "required": [
        "figure_list"
      ],
      "title": "Figures"
    },
    "Figure": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "annotations": {
          "description": "An array of Quire annotation sets",
          "type": "array",
          "$ref": "#/definitions/AnnotationSet",
          "uniqueItems": false
        },
        "canvasId": {
          "description": "URI of an remote IIIF canvas",
          "$ref": "#/definitions/URI"
        },
        "caption": {
          "description": "A text caption for the figure",
          "type": "string"
        },
        "credit": {
          "description": "A text credit line for the figure",
          "type": "string"
        },
        "download": {
          "description": "Enable download of the figure source",
          "type": "boolean",
          "default": false
        },
        "id": {
          "description": "A unique id for the figure object",
          "type": "string"
        },
        "label": {
          "description": "A text label for the figure",
          "type": "string"
        },
        "media_id": {
          "$ref": "#/definitions/MediaID"
        },
        "manifestId": {
          "description": "URI of an remote IIIF manifest",
          "$ref": "#/definitions/URI"
        },
        "media_type": {
          "$ref": "#/definitions/MediaType"
        },
        "poster": {
          "description": "A static image for a video",
          "type": "string"
        },
        "printImage": {
          "description": "A relative path to an image project assets directory for print output",
          "type": "string"
        },
        "region": {
          "$ref": "#/definitions/iiifRegion"
        },
        "sequences": {
          "description": "An array of IIIF sequence structures",
          "type": "array",
          "items": {
            "$ref": "#/definitions/Sequence"
          },
          "uniqueItems": true
        },
        "src": {
          "description": "A relative path to an image in the project assets directory",
          "type": "string"
        },
        "zoom": {
          "description": "Enable image tiling for IIIF zoom interaction",
          "type": "boolean",
          "default": false
        },
      },
      "required": [
        "id"
      ],
      "title": "FigureList"
    },
    "AnnotationSet": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "input": {
          "type": "string",
          "enum": [ "checkbox", "radio" ],
          "default": "radio"
        },
        "items": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/AnnotationItem"
          },
          "uniqueItems": true
        },
        "title": {
          "type": "string"
        }
      },
      "required": [ "items" ],
      "title": "Annotation Set"
    },
    "AnnotationItem": {
      "description": "",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "src": {
          "description": "A relative path to the annotation image source",
          "type": "string"
        },
        "label": {
          "type": "string"
        },
        "region": {
          "$ref": "#/definitions/iiifRegion"
        },
        "selected": {
          "description": "Wether the annotation will be selected by default",
          "type": "boolean",
          "default": false
        },
        "text": {
          "description": "A IIIF text annotation",
          "type": "string"
        }
      },
      "required": [ "src" ],
      "title": "Item"
    },
    "MediaID": {
      "description": "A unique id for the media",
      "oneOf": [
        {
          "type": "integer"
        },
        {
          "type": "string"
        }
      ],
      "title": "MediaID"
    },
    "MediaType": {
      "description": "Quire figure media type",
      "type": "string",
      "enum": [ "soundcloud", "table", "video", "vimeo", "youtube" ]
    },
    "iiifRegion": {
      "description": "x,y,w,h",
      "type": "string",
      "pattern": "\d+,\d+,\d+,\d+"
    },
    "Sequence": {
      "description": "A Quire data IIIF sequence structure",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "behavior": {
          "description": "IIIF Presentation API 3.0 sequence behavior",
          "type": "array",
          "enum": [ "continuous", "sequence" ]
        },
        "id": {
          "description": "A relative path to the directory of sequence images",
          "type": "string"
        },
        "label": {
          "description": "A text label for the IIIF sequence",
          "type": "string"
        },
        "regex": {
          "description": "A file pattern for images in the sequence",
          "type": "string"
        },
        "start": {
          "description": "An id for the starting item in the sequence",
          "type": "string"
        }
      }
    },
    "URI": {
      "description": "A regular expression pattern for valid URIs",
      "type": "string",
      "pattern": "/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[\-;:&=\+\$,\w]+@)?[A-Za-z0-9\.\-]+|(?:www\.|[\-;:&=\+\$,\w]+@)[A-Za-z0-9\.\-]+)((?:\/[\+~%\/\.\w\-_]*)?\??(?:[\-\+=&;%@\.\w_]*)#?(?:[\.\!\/\\\w]*))?)/"
    }
  }
}
