{% assign tableSrc = 'static' | imageDir | src | join: '' %}

{% assign figureId = 'deepzoomtable' | append: date }}
{% assign modalLink = 'figureId' | prepend: '#' }}

{% if site.params.figureModal %}
  <figure
    class="quire-figure leaflet-outer-wrapper mfp-hide notGet"
    id="{{ figureId }}"
    title="{{ caption | markdownify }}"
  >
    <div
      aria-label="Zoomable table"
      aria-live="polite"
      class="quire-deepzoom inset leaflet-inner-wrapper"
      id="js-{{ figureId }}"
      role="application"
    >
      <figure class="leaflet-table">{% include tableSrc %}</figure>
    </div>
  </figure>
  <a
    class="inline popup"
    data-type="inline"
    href="{{ modalLink }}"
    title="{{ caption | markdownify }}"
  >
{% endif %}

    <figure class="quire-figure__table">
      {% include tableSrc %}
    </figure>

{% assign params = { caption: caption, credit: credit, label: label, modalLink: modalLink } %}

{% label and site.params.figureLabelLocation == 'on-top' %}
  {% render '../label' with params %}
{% endif %}

{% if site.params.figureModal %}
  </a>
{% endif %}

{% render '../caption' with params %}
