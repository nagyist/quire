{% assign src = mediaId %}

{% if site.params.epub or site.params.pdf %}
  {% render 'fallback', alt: alt, id: id, mediaType: mediaType, src: src %}

  <figcaption class="quire-figure__caption caption">
    <a href="{{ src }}" target="_blank">{{ src }}</a>
  </figcaption>

{% else %}

  <div class="q-figure__media-wrapper--{{ aspectRatio or 'widescreen' }}">
    <iframe class="quire-figure__media" src="{{ mediaId }}" />
  </div>
{% endif %}

{% assign params = { caption: caption, credit: credit, label: label } %}

{% label and site.params.figureLabelLocation == 'on-top' %}
  {% render '../label' with params %}
{% endif %}

{% render '../caption' with params %}
