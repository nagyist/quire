{% comment %}
A partial to add contributors to page headers. Checks value of
contributorByline set in config.yml and contributor_byline set in the page
YAML to determine if the contributors should be added, and in what form.
{% endcomment %}

{% comment %}
Define the list type

TODO: determine if this should get a default value, perhaps "string"
{% endcomment %}

{% assign listType = nil %}
{%- if contributor_byline == "name" -%}
  {% assign listType = "list" %}
{%- if contributor_byline == "name-title" -%}
  {% assign listType = "list-plus" %}
{%- else -%}
  {% assign globalByline = site.params.contributorByline %}
  {%- if globalByLine == "name" -%}
    {% assign listType = "list" %}
  {%- elsif globalByLine == "name-title" -%}
    {% assign listType = "list-plus" %}
  {%- else -%}
    {% assign listType = "list-plus" %}
  {%- endif -%}
{%- endif -%}

{% comment %}
Check global setting, do nothing if set to false w/ no page override
{% endcomment %}

{%- if site.params.contributorByline == false and contributor_byline == false or contributor_byline == nil -%}

{%- else -%}

  {% comment %}
  Add contributors if contributor_byline is not false
  {% endcomment %}

  {%- if contributor_byline != false -%}
    {%- if contributor_as_it_appears -%}
      <div class="quire-page__header__contributor">
        <p class="quire-contributor">{{ markdownify .Params.contributor_as_it_appears }}<p>
      </div>
    {%- elsif contributor -%}
      <div class="quire-page__header__contributor">
        {% assign params = { contributor: contributor, contributorType: "all", listType: listType } %}
        {% render "contributor/list", params %}
      </div>
    {%- endif -%}
  {%- endif -%}

{%- endif -%}
