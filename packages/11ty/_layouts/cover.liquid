---
layout: base
description: Cover page layout. This controls the home page of the publication.
---
{% assign imageDir = data.imageDir %}
<div class="{% include 'page/class' %} quire-cover" id="main" role="main">
  {% if config.epub %}
    {% if site.data.publication.promo_image -%}
      {% assign imgCoverPath = site.params.imgDir | append | site.data.publication.promo_image %}
      <img src="{{ imgCoverPath | url }}" class="epub-cover-image" />
    {%- endif %}
  {% else %}

  {% comment %}
  Begin full-page cover section
  {% endcomment %}

  {% if image -%}
    {% assign imgPath = site.params.imgDir | append: "/" | append: image %}
    <section class="quire-cover__hero hero is-fullheight">
      <div class="quire-cover__overlay" style="background-image: url('{{ $imgPath }}');"></div>
  {%- else -%}
    <section class="quire-cover__hero hero is-fullheight">
      <div class="quire-cover__overlay"></div>
  {%- endif %}
      <div class="quire-cover__hero-body hero-body">
        <div class="container is-fluid">

        {% comment %}
        Use site.data.publication info if available
        {% endcomment %}

        {% if site.data.publication %}
          <h1 class="title">
            {{- site.data.publication.title | markdownify -}}
            {% if site.data.publication.subtitle %}
              {% if site.data.publication.title | slice: -1, 1 == "!" or site.data.publication.title | slice: -1, 1 == "?" %}
                {% comment %} if title ends with "!" or "?", render whitespace only {% endcomment %}
              {% else -%}
                <span class="visually-hidden">: </span>
              {%- endif %}
              <span class="subtitle">{{ site.data.publication.subtitle | markdownify }}</span>
            {%- endif -%}
          </h1>
          {% if site.data.publication.reading_line %}
            <p class="reading-line">{{ site.data.publication.reading_line | markdownify }}</p>
          {% endif %}
          <div class="contributor">
            {% if site.data.publication.contributor_as_it_appears %}
              {{- site.data.publication.contributor_as_it_appears | markdownify -}}
            {% else %}
              <span class="visually-hidden">Contributors: </span>

              {% comment %}
              List primary contributors, unless none are marked as "primary".
              In this case, list all contributors in publication.yml
              ---------------------------------------------------------------
              {% endcomment %}

              {% assign hasContributorType = true %}
              {% for contributor in site.data.publication.contributor %}
                {% if contributor.type %}
                  {% assign hasContributorType = true %}
                {% endif %}
              {% endfor %}
              {% assign params = { contributors: site.data.publication.contributor, contributorType: "all", listType: "string" } %}
              {%- if hasContributorType -%}
                {% assign params.contributorType = "primary" %}
              {%- endif -%}
              <em>{% render "contributor/list", params %}</em>
            {% endif %}
          </div>
        {{ else }}

        {% comment %}
        Fallback for when no publication.yml data is present
        {% endcomment %}

          <h1 class="title">{{ site.title }}</h1>
        {% endif %}
        </div>
      </div>
    </section>

  {% comment %}
  End full-page cover section
  ------------------------------
  Begin "below-the-fold" section
  {% endcomment %}

  {% if content %}
    <section class="quire-cover__more" >
      <div class="quire-cover__more-body hero-more">
        {% if site.params.epub != true and site.params.pdf != true %}
        <a href="#content">
          {%- render "icon", type: "down-arrow", description: "Scroll down to read more" -%}
        </a>
        {% endif %}
      </div>
    </section>
    <section class="section quire-page__content" id="content">
      <div class="container is-fluid">
        <div class="content">
          {{ content }}
          {% render "page/bibliography" %}
        </div>
      </div>
    </section>
    {% render "footer-buttons" %}
  {% else %}
    {% assign pages = site.pages | where: "online" %}
    {% for page in pages %}
      {% if page.type == "data" %}
        {% assign pages[forLoop.index] = nil %}
      {% endif %}
    {% endfor %}
    {% assign pages = pages | compact %}
    {% assign nextPages = pages %}
    {% for page in nextPages %}
      {% if page.weight > weight %}
        {% assign nextPages[forLoop.index] = nil %}
      {% endif %}
    {% endfor %}
    {% assign nextPages = nextPages | compact %}
    {% if nextPages.size > 0 %}
      <section class="quire-cover__more" >
        <div class="quire-cover__more-body hero-more next-page">
          {% if site.params.epub != true and site.params.pdf != true %}
            <a href="{{ nextPages[0].permalink }}">
              {%- render "icon", type: "down-arrow", description: "Scroll down to read more" -%}
            </a>
          {% endif %}
        </div>
      </section>
    {% endif %}
  {% endif %}

  {% comment %}
  End "below-the-fold" section
  {% endcomment %}

  {% if site.params.pdf %}
    {% render "pdf-title-pages" %}
  {% endif %}
</div>
